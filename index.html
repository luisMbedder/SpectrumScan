<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
<!-- Include *at least* the core style and default theme -->
<script type="text/javascript" src="javascripts/XRegExp.js"></script> <!-- XRegExp is bundled with the final shCore.js during build -->
  <script type="text/javascript" src="javascripts/shCore.js"></script>
  <script type="text/javascript" src="javascripts/shBrushBash.js"></script>
  <link type="text/css" rel="stylesheet" href="stylesheets/shCore.css"/>
  <link type="text/css" rel="Stylesheet" href="stylesheets/shThemeDefault.css" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>SpectrumScan by luisMbedder</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>SpectrumScan</h1>
        <h2>SDR based 2GHz Spectrum Analyzer </h2>
        <a href="https://github.com/luisMbedder/SpectrumScan" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>
<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is SpectrumScan?</h3>

<p>SpectrumScan is a spectrum analyzer with a 2GHz frequency range built on the beaglebone black that allows you capture and display the radio wave frequencies that we're surrounded by everyday. It works by using USB DVB-T television reciever based on the RTL2832 demodulator chip which allows direct access to the I/Q data using the rtl-sdr library. A Fast-Fourier-Transform(FFT) is performed on the sampled signals which converts the data to the frequency domain and is then plotted on the screen. </p>

<p>In this page I show you how to build your very own SpectrumScan so you too can explore a wide range of fequencies including FM radio, television, emergency & weather radio, citizen band, and many more! </p>

<img src="images/ss-drawing2.png" alt="Block Diagram" draggable="false">

<h3>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h3>

<p>The following features are currently available on SpectrumScan Version 1.0 </p>
 <ul>
  <li>Touchscreen 7.0" LCD display</li>
  <li>Browse the spectrum by scrolling horizontally</li>
  <li>User adjustable gain setting</li>
  <li>2.4MHz Bandwidth</li>
  <li>Instantaneous spectrum plot</li>
  <li>Waterfall spectrum plot</li>
</ul> 

<h3>
<a id="demo" class="anchor" href="#demo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Demo</h3>
<video width="720" muted="true" loop="true" controls>
  <source src="images/joescode.webm" type="video/webm">
</video>
<p>add video and or pictures of spectrumscan</p>

<h3>
<a id="libraries-and-software" class="anchor" href="#libraries-and-software" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hardware and Software</h3>

<p>Here is the complete list of hardware and software components. The entire project can be built for around $150.</p>

<p>Hardware:</p>
<ul>
  <li><a href="http://beagleboard.org/BLACK">Beaglebone black</a> </li>
  <li><a href="http://www.4dsystems.com.au/product/4DCAPE_70T/">7.0" LCD Cape</a> - The software has been designed to run on an 800x480 resolution screen.</li>
  <li>RTL2832U based DVB-T USB dongle with R820T tuner - I used one from <a href="http://www.nooelec.com/store/sdr/sdr-receivers/nesdr-mini-rtl2832-r820t.html">NooElec</a>. </li>
  <li>8GB SD card minimum for building and installing dependencies</li>
  <li>Power Supply - I highly recommended to power the beaglebone using an external power supply rather than the USB cable alone. </li>
</ul> 

<p>Software and Dependencies:</p>
<ul>
  <li>Debian linux for beaglebone-latest images can be found <a href="http://beagleboard.org/latest-images">here</a></li>
  <li>libusb - for communicating with the USB dongle</a></li>
  <li>librtlsdr - turns the DVB-T dongle into a software defnied radio reciever</li>
  <li>libav - used for the FFT alogrithm</li>
  <li>tslib - touchscreen library </li>
  <li>Qt Embedded - for Qt components</li>
  <li>SpectrumScan - main application</li>
</ul> 

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installion Instructions</h3>

<p>The procedure to build SpectrumScan on your own beaglebone is described in this section. I divided the build into
three parts, structured around several necessary reboots.Note that this was built on a beaglebone running linux debian.  </p>

<script type="text/plain" id="input">

############
#
# Start of Part 1 
#
############
#
# I prefer to create a new user rather than use the default account.
# We also need a group "input" for access to the touchscreen device.
#
sudo adduser spectrumscan
sudo addgroup input
sudo usermod -a -G admin spectrumscan
sudo usermod -a -G adm spectrumscan
sudo usermod -a -G input spectrumscan
#
# Assume that everything in this script is done logged into the spectrumscan 
# account unless otherwise noted.
#
# Inorder to install Qt4 embedded you will need to boot linux from an sdcard,
# not the on-board eMMC drive. This is so we can expand the root file 
# partition to the entire size of the SD card. Otherwise we will be limited 
# to the 4GB available on the eMMC which wont be enough space to build all the 
# Qt stuff. You will need at least an 8GB SD card. Instructions on how to 
# expand your partition are provided in the following link, 
# http://elinux.#org/Beagleboard:Expanding_File_System_Partition_On_A_microSD
#
# continue to part 2 once you have expanded your partition. 
#

############
#
# End of Part 1
#
############


############
#
# Start of Part 2
#
############
#
# The usual update for a new install...
# Plus, we dont need Apache or lightdm. 
#
sudo apt-get update
sudo apt-get purge lightdm apache2
sudo apt-get autoremove
sudo apt-get upgrade
sudo apt-get dist-upgrade
sudo shutdown -r now

############
#
# End of Part 2
#
############


############
#
# Start of Part 3
#
############
#
# Install the libraries on which SpectrumScan depends.
#
sudo apt-get install libavdevice-dev libavfilter-dev libusb-1.0-0-dev
#
# Create /etc/apt/sources.list.d/wheezy-backports.list with one line, 
# then install libavresample-dev from wheezy-backports.
#
sudo echo -e "deb http://ftp.debian.org/debian wheezy-backports main\n" 
>/etc/apt/sources.list.d/wheezy-backports.list
sudo apt-get update
sudo apt-get -t wheezy-backports install libavresample-dev
#
# Install tslib
#
cd ~spectrumscan
git clone git://github.com/kergoth/tslib.git
cd tslib
./autogen.sh
./configure
make
make install
#
# Set some environment variables and make them permanent by adding the 
# following export statements to the /etc/profile file. 
#
nano /etc/profile
export OE_QMAKE_CXX=/usr/bin/gcc
export OE_QMAKE_CXX=/usr/bin/g++
export OE_QMAKE_LINK=/usr/bin/gcc
export OE_QMAKE_INCDIR_QT=/usr/include/qtopia
export OE_QMAKE_MOC=/usr/bin/moc
export LD_LIBRARY_PATH=/usr/local/lib:/usr/local/qwt-6.1.0/lib:/usr/local/Trolltech/QtEmbedded-4.8.6/lib:$
LD_LIBRARY_PATH}
export TSLIB_TSDEVICE=/dev/input/event1
export QWS_MOUSE_PROTO=tslib:/dev/input/event1
export TSLIB_CALIBFILE = etc/pointercal
#
# We must build the latest Qt4-embedded from source as there is no package 
# available for debian. This part takes a *loong* time, like hours...Just 
# let it run overnight.
#
cd ~spectrumscan
wget http://download.qt-project.org/official_releases/qt/4.8/4.8.6/qt-everywhere-opensource-src-4.8.6.tar.gz
gunzip qt-everywhere-opensource-src-4.8.6.tar.gz
tar xf qt-everywhere-opensource-src-4.8.6.tar
cd qt-everywhere-opensource-src-4.8.6
./configure -embedded -opensource -fast -release -qt-mouse-tslib -no-webkit -nomake examples -nomake demos 
-nomake docs -qt-kbd-tty -qt-kbd-linuxinput
make
sudo make install
#
# Install the QWT widget library.
#
cd ~spectrumscan
wget http://jaist.dl.sourceforge.net/project/qwt/qwt/6.1.0/qwt-6.1.0.tar.bz2
tar -xjvf qwt-6.1.0.tar.bz2
cd qwt-6.1.0
#
# Edit qwtconfig.pri, remove QwtOpenGL, QwtDesigner
# Edit ./src/src.pro, change TARGET to: TARGET = $$qwtLibraryTarget(qwt$$QT_LIBINFIX)
# 
export PATH=$PATH:/usr/local/Trolltech/QtEmbedded-4.8.6/bin:
qmake 
make
sudo make install
#
# Install the RTL-SDR libraries.
#
cd ~spectrumscan
git clone git://git.osmocom.org/rtl-sdr.git
cd rtl-sdr
autoreconf -i
./configure --enable-driver-detach
make
sudo make install
sudo make install-udev-rules
#
# Make sure the stock RTL driver does not load.
#
sudo echo -e "blacklist dvb_usb_rtl28xxu" >/etc/modprobe.d/50-rtlsdr.conf
#
# And we"'"ll need to allow ourselves access to the touchscreen device.
#
sudo echo -e "KERNEL==\"event*\", NAME=\"input/%k\", MODE=\"660\", GROUP=\"input\"" >/etc/udev/rules.d/99-input.rules
#
# Clone the SpectrumScan code and build it.
#
cd ~spectrumscan
git clone git://github.com/luisMbedder/SpectrumScan.git
#
# Edit SpectrumScan.pro
# "include" directive becomes include (/usr/local/qwt-6.1.0/features/qwt.prf)
# "target.path" becomes target.path = /home/spectrumscan
# Comment out both "INCLUDEPATH" lines.
# Remove all the "-L" options on the "LIBS" line.
# "CXXFLAGS" becomes QMAKE_CXXFLAGS += -Wno-psabi -D__STDC_CONSTANT_MACROS
#
cd spectrumscan
qmake -o Makefile SpectrumScan.pro
make
#
# and reboot..
#
sudo shutdown -r now
#
# after reboot, your ready to run SpectrumScan!!
#
SpectrumScan -qws

#############
#
# End of Part 3
#
#############




</script>

<script type="text/javascript">
var brush = new SyntaxHighlighter.brushes.Bash(),
  code = document.getElementById('input').innerHTML,
  html
  ;
  
brush.init({ toolbar: false });
html = brush.getHtml(code);

document.write(html);
</script>


        </section>

        <aside id="sidebar">
          <a href="https://github.com/luisMbedder/SpectrumScan/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/luisMbedder/SpectrumScan/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/luisMbedder/SpectrumScan"></a> SpectrumScan is maintained by <a href="https://github.com/luisMbedder">luisMbedder</a>.</p>

        </aside>
      </div>
    </div>

  </body>
</html>
